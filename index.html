<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dorra Dhibi â€” Portfolio</title>
  <meta name="description" content="Interactive portfolio with search, filters, modal details. Green theme." />

  <!-- âœ… Social preview -->
  <link rel="canonical" href="https://YOUR-VERCEL-URL.vercel.app/">
  <meta property="og:title" content="Dorra Dhibi â€” LCA & Sustainability Portfolio" />
  <meta property="og:description" content="Interactive portfolio: projects, bio, achievements, and contact." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://YOUR-VERCEL-URL.vercel.app/" />
  <meta property="og:image" content="https://YOUR-VERCEL-URL.vercel.app/preview.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:image:alt" content="Dorra Dhibi â€” portfolio hero section" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Dorra Dhibi â€” LCA & Sustainability Portfolio" />
  <meta name="twitter:description" content="Interactive portfolio: projects, bio, achievements, and contact." />
  <meta name="twitter:image" content="https://YOUR-VERCEL-URL.vercel.app/preview.jpg" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#0b0f0c;--panel:#0f1511;--text:#e8f3ea;--muted:#9fb7a6;--brand:#20c05c;--brand-2:#7ce2a8;--chip:#122218;--border:#1b2a21;--shadow:0 10px 30px rgba(0,0,0,.28);--radius:14px}
    :root.light{--bg:#f6fbf8;--panel:#fff;--text:#0b0f0c;--muted:#4d5a52;--brand:#0e9f4a;--brand-2:#41d48a;--chip:#e9f7ef;--border:#dfe7e1;--shadow:0 8px 22px rgba(16,24,40,.08)}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:radial-gradient(1200px 800px at 20% -5%, rgba(32,192,92,.15), transparent 55%),radial-gradient(900px 600px at 120% 10%, rgba(65,212,138,.14), transparent 45%),var(--bg);color:var(--text);line-height:1.6}
    .container{max-width:1100px;margin:0 auto;padding:20px}

    /* Header */
    .site-header{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--border);gap:14px}
    .brand{display:flex;gap:12px;align-items:center}
    .avatar{width:48px;height:48px;display:grid;place-items:center;border-radius:50%;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#062010;font-weight:800;box-shadow:var(--shadow)}
    .subtitle{color:var(--muted);margin-top:-6px}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{border:1px solid var(--border);background:var(--panel);color:var(--text);padding:8px 12px;border-radius:var(--radius);cursor:pointer;text-decoration:none;box-shadow:var(--shadow);transition:transform .08s ease}
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#062010;border:none;font-weight:700}

    /* Hero */
    .hero{display:grid;grid-template-columns:1.25fr .75fr;gap:24px;align-items:center;margin-top:22px}
    .hero-img{width:100%;border-radius:9999px;border:4px solid rgba(32,192,92,.6);box-shadow:0 10px 30px rgba(0,0,0,.28),0 0 0 6px rgba(32,192,92,.2);background:linear-gradient(120deg, rgba(32,192,92,.15), rgba(65,212,138,.12));aspect-ratio:1/1;object-fit:cover;object-position:50% 20%}
    .quick-links{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
    .chip{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--chip);color:var(--text);text-decoration:none;font-weight:600;border:1px solid var(--border)}

    /* Controls */
    .controls{display:grid;gap:10px;grid-template-columns:1fr;margin:26px 0 8px}
    #q{width:100%;padding:12px 14px;border-radius:var(--radius);border:1px solid var(--border);background:var(--panel);color:var(--text)}
    .tag-bar{display:flex;gap:8px;flex-wrap:wrap}
    .tag{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:var(--panel);cursor:pointer}
    .tag.active{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#062010;border-color:transparent}
    .sort-row{display:flex;gap:10px;align-items:center}
    select{padding:8px 10px;border-radius:10px;border:1px solid var(--border);background:var(--panel);color:var(--text)}

    /* Project cards */
    .project-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .card{border:1px solid var(--border);background:var(--panel);border-radius:18px;overflow:hidden;display:flex;flex-direction:column;transition:transform .12s ease, box-shadow .12s ease}
    .card:hover{transform:translateY(-2px);box-shadow:var(--shadow)}
    .card img{width:100%;aspect-ratio:16/9;object-fit:cover;background:linear-gradient(120deg, rgba(32,192,92,.15), rgba(65,212,138,.12))}
    .card .content{padding:12px;display:grid;gap:6px}
    .card .meta{display:flex;justify-content:space-between;color:var(--muted);font-size:.9rem}
    .card .tags{display:flex;gap:6px;flex-wrap:wrap;margin-top:4px}
    .badge{font-size:.8rem;padding:4px 8px;border:1px solid var(--border);border-radius:999px}

    /* Modal */
    dialog.modal{border:none;border-radius:20px;padding:0;max-width:820px;width:95%;background:var(--panel);color:var(--text)}
    dialog.modal::backdrop{background:rgba(0,0,0,.55)}
    .modal-inner{padding:0}
    .modal-header,.modal-footer{padding:12px 16px;border-bottom:1px solid var(--border)}
    .modal-footer{border-top:1px solid var(--border);border-bottom:none;display:flex;gap:8px}
    .modal-body{padding:16px;display:grid;gap:10px}

    /* âœ… Achievements â€” compact cards like the screenshot */
    #achievements { margin-top: 28px; }
    .ach-list{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:18px;
    }
    .ach-card{
      border:1px solid var(--border);
      background:var(--panel);
      border-radius:18px;
      overflow:hidden;
      box-shadow:var(--shadow);
      transition:transform .12s ease, box-shadow .12s ease;
    }
    .ach-card:hover{
      transform: translateY(-2px);
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
    }
    .ach-card > img{
      width:100%;
      height:190px;             /* large header image */
      object-fit:cover;
      display:block;
    }
    .ach-card .body{
      padding:14px;
      display:grid;
      gap:10px;
    }
    .ach-meta{
      font-size:.92rem;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top:-2px;
    }
    .ach-title{
      font-size:1rem;
      font-weight:800;
      color:var(--text);
    }
    .ach-note{
      margin:0;
      font-size:.95rem;
      color:var(--text);
    }
    .ach-thumbs{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:8px;
    }
    .ach-thumbs img{
      width:100%;
      height:64px;
      object-fit:cover;
      border-radius:10px;
      border:1px solid var(--border);
    }

    /* Footer and helpers */
    .site-footer{border-top:1px solid var(--border);margin-top:40px;color:var(--muted)}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}

    /* Title entrance animation */
    @keyframes titlePop {
      0% { opacity: 0; transform: translateY(12px) scale(0.98); filter: blur(2px); }
      60% { opacity: 1; transform: translateY(0) scale(1.005); filter: blur(0); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }
    #intro-title { animation: titlePop .9s cubic-bezier(.2,.7,.2,1) both; }

    @media (max-width:900px){.hero{grid-template-columns:1fr}.project-grid{grid-template-columns:1fr 1fr}.ach-list{grid-template-columns:1fr 1fr}}
    @media (max-width:600px){.project-grid{grid-template-columns:1fr}.ach-list{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header class="site-header container">
    <div class="brand">
      <div class="avatar" aria-hidden="true">DD</div>
      <div>
        <h1 id="site-title">Dorra Dhibi</h1>
        <p class="subtitle">Industrial Biology Engineer â€¢ LCA & Sustainability</p>
      </div>
    </div>
    <nav class="actions">
      <button id="themeToggle" class="btn" aria-label="Toggle dark mode">ðŸŒ“</button>
      <a href="#contact" class="btn primary">Contact</a>
      <a href="https://drive.google.com/file/d/19EGFhN1OkaTM4Yn-C288hKFkHgHsXuqS/view" target="_blank" rel="noopener" class="btn">RÃ©sumÃ©</a>
    </nav>
  </header>

  <main class="container">
    <!-- Hero -->
    <section class="hero" aria-labelledby="intro-title">
      <div>
        <h2 id="intro-title">I analyze & optimize products through LCA.</h2>
        <p><strong>Welcome to Dorra's Portfolio â€“ Where Environmental Engineering Meets Innovation.</strong><br/>Why hire me? Because I take initiative, lead by example, self-learn fast, and leave a positive impact in every project. I'm an Industrial Biology Engineer turning complex environmental challenges into sustainable solutionsâ€”from LCAs achieving up to <strong>38% GHG reductions</strong> to award-winning work in AI and climate policy.</p>
        <div class="quick-links">
          <a class="chip" href="#skills">Skills</a>
          <a class="chip" href="#projects">Projects</a>
          <a class="chip" href="#achievements">Achievements</a>
        </div>
      </div>
      <!-- Your hero photo lives in the repo root -->
      <img class="hero-img" src="portrait.jpg" alt="Portrait of Dorra Dhibi" />
    </section>

    <!-- Controls -->
    <section class="controls" aria-label="Filters and search">
      <input type="search" id="q" placeholder="Search projects (title, desc, tech)..." aria-label="Search projects" />
      <div id="tagBar" class="tag-bar" role="list" aria-label="Filter by tag"></div>
      <div class="sort-row">
        <label for="sort">Sort by:</label>
        <select id="sort" aria-label="Sort projects">
          <option value="newest">Newest</option>
          <option value="oldest">Oldest</option>
          <option value="az">A â†’ Z</option>
          <option value="za">Z â†’ A</option>
        </select>
      </div>
    </section>

    <!-- Projects Grid -->
    <section id="projects" class="grid" aria-labelledby="projects-title">
      <h2 id="projects-title" class="sr-only">Projects</h2>
      <div id="projectGrid" class="project-grid" aria-live="polite"></div>
    </section>

    <!-- Modal for project details -->
    <dialog id="projectModal" aria-labelledby="modalTitle" class="modal">
      <form method="dialog" class="modal-inner">
        <header class="modal-header">
          <h3 id="modalTitle">Project title</h3>
        </header>
        <div id="modalBody" class="modal-body"></div>
        <footer class="modal-footer">
          <button value="close" class="btn">Close</button>
        </footer>
      </form>
    </dialog>

    <!-- Achievements -->
    <section id="achievements" class="container" aria-labelledby="achievements-title">
      <h2 id="achievements-title">Achievements</h2>
      <div class="ach-list">
        <!-- SUSI -->
        <article class="ach-card">
          <img src="susi1.jpg" alt="SUSI EE 2024 main" />
          <div class="body">
            <div class="ach-meta"><strong class="ach-title">SUSI EE Participant</strong><span>2024</span></div>
            <p class="ach-note">Selected (1 of 4 / ~1,000 applicants), U.S. Dept. of State.</p>
            <div class="ach-thumbs">
              <img src="susi2.jpg" alt="" />
              <img src="susi3.jpg" alt="" />
              <img src="susi5.jpg" alt="" />
            </div>
          </div>
        </article>

        <!-- JCI Awards -->
        <article class="ach-card">
          <img src="reward.jpg" alt="JCI INSAT awards main" />
          <div class="body">
            <div class="ach-meta"><strong class="ach-title">Best Prospective & Exceptional Member â€” JCI INSAT</strong><span>2024</span></div>
            <p class="ach-note">Recognized for leadership, dedication, and impact.</p>
            <div class="ach-thumbs">
              <img src="reward12.jpg" alt="" />
              <img src="reward33.jpg" alt="" />
            </div>
          </div>
        </article>

        <!-- Hackathon -->
        <article class="ach-card">
          <img src="hack.jpg" alt="AI Hackathon main" />
          <div class="body">
            <div class="ach-meta"><strong class="ach-title">1st â€” Business AI Hackathon</strong><span>2025</span></div>
            <p class="ach-note">Led plan & pitch for an AI-driven solution.</p>
            <div class="ach-thumbs">
              <img src="hack2.jpg" alt="" />
            </div>
          </div>
        </article>

        <!-- Debate -->
        <article class="ach-card">
          <img src="debates.jpg" alt="Debate competition main" />
          <div class="body">
            <div class="ach-meta"><strong class="ach-title">1st â€” Debate Competition</strong><span>2025</span></div>
            <p class="ach-note">Public speaking, critical thinking, teamwork.</p>
            <div class="ach-thumbs">
              <img src="debates2.jpg" alt="" />
              <img src="debates4.jpg" alt="" />
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- Contact (your details) -->
    <section id="contact" class="contact container" aria-labelledby="contact-title">
      <h2 id="contact-title">Contact</h2>
      <div class="card" style="padding:16px;">
        <p><strong>Email:</strong> <a href="mailto:dhibidorra@gmail.com">dhibidorra@gmail.com</a></p>
        <p><strong>Phone:</strong> <a href="tel:+21650822174">+216 50 822 174</a></p>
        <p><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/dhibi-dorra/" target="_blank" rel="noopener">linkedin.com/in/dhibi-dorra</a></p>
      </div>
    </section>
  </main>

  <footer class="site-footer container">
    <small>Â© <span id="year"></span> Dorra Dhibi â€” Green & clean ðŸŒ¿</small>
  </footer>

  <script>
    const PROJECTS = [
      { id:"microalgae-biodiesel-lca", title:"Comparative LCA of Microalgae Biodiesel (PBR vs Raceway)", year:2025, tags:["LCA","Bioenergy","Research"], tech:["openLCA","Ecoinvent","Python"], description:"Photobioreactors vs. open raceway pondsâ€”environmental tradeoffs for algae biodiesel.", long:"Compares cultivation/processing inventories for PBR vs ORP across scenarios...", highlights:["Scenario comparison (PBR vs ORP)","Hotspot analysis","Recommendations for energy inputs"], demo:"https://drive.google.com/file/d/1aBh45azVgrKT8o_I-0oFTAjDKnx1IOjH/view", image:"microalgae.png" },
      { id:"pyrolysis-lca", title:"LCA of Biomass & Plastic Waste Pyrolysis", year:2025, tags:["LCA","Circular Economy","Energy"], tech:["openLCA","Python"], description:"Environmental assessment of pyrolysis for mixed biomass/plastics.", long:"Three scenariosâ€”slow, fast, co-pyrolysis...", highlights:["Feedstock sensitivity","Co-product credits","Energy recovery mapping"], demo:"https://drive.google.com/file/d/1yG_I_2fzkLJwaKeiEFlAFRJgBlmYYZ4Z/view", image:"pyrolysis.png" },
      { id:"levulinic-acid-uncertainty", title:"LCA under Uncertainty: Levulinic Acid (Bio vs Petro)", year:2025, tags:["LCA","Uncertainty","Chemistry"], tech:["openLCA","Monte Carlo","TEA"], description:"Bio-based vs petrochemical LA with sustainability, safety & TEA.", long:"Comparative LCA/TEA/safety framework...", highlights:["Monte Carlo propagation","Safety considerations","TEA integration"], demo:"https://drive.google.com/file/d/18IM9c6p5Of-J07kZaibXmKMmamFAKyjW/view", image:"levulinic.png" },
      { id:"phenolics-docking-env", title:"Molecular Docking & Environmental Applications of Phenolics", year:2024, tags:["Computational","Chemistry","Env. Eng."], tech:["Docking","Python","R"], description:"Catechol, Kojic acid, L-DOPA, Gallic acidâ€”binding insights with applied angles.", long:"Review + docking to catechol oxidase (PDB 1BUG)...", highlights:["Ligand panel","Scoring & validation","Applied interpretation"], demo:"https://drive.google.com/file/d/1DPAFFW-NcHDLbh5LpRudA8CQZAnmwqg9/view", image:"docking.png" },
      { id:"carbon-neutral-jetfuel-lca", title:"Life Cycle Assessment of Carbon-Neutral Jet Fuel", year:2025, tags:["LCA","Aviation","Energy"], tech:["openLCA","Ecoinvent"], description:"HTL/HDO canola-meal pathway; hotspots and integration prospects.", long:"Comprehensive LCA of a biorefinery pathway...", highlights:["Upstream COâ‚‚ sourcing","Energy demand hotspots","Offset boundaries"], demo:"https://drive.google.com/file/d/1fwRXczMo6qHlTwgFv0vo-2ARoAbnvLK1/view", image:"aviation.png" },
      { id:"pla-phb-lca", title:"Comparative LCA of PLA vs PHB Bioplastics", year:2025, tags:["LCA","Bioplastics","Circular Economy"], tech:["openLCA"], description:"PLA vs PHB across stages; sensitivity & EOL.", long:"OAT + Monte-Carlo, EOL scenarios, MCDA...", highlights:["EOL scenarios","Fossil benchmarks","Sensitivity analysis"], image:"pla_phb.png" },
      { id:"tmb-pipeline-melanoma", title:"Tumor Mutational Burden (TMB) Pipeline for Melanoma", year:2025, tags:["Bioinformatics","Pipeline"], tech:["BWA","Samtools","GATK4","R","Shiny"], description:"End-to-end workflow FASTQâ†’VCF with Shiny explorer.", long:"Automated QC, hg38 indexing, scripts...", repo:"https://github.com/Dorradhibi/Tumor-Mutation-Burden-TMB-Analysis-", image:"tmb.png" },
      { id:"cosmetics-innovation-natural", title:"Cosmetic Innovations: Natural Ingredients & Functionality", year:2025, tags:["Research","Cosmetics","Sustainability"], tech:["Review","Evidence Synthesis"], description:"Which new naturals deliver real functional gains?", long:"Sun-care innovation: science, filters, formulation, testing...", demo:"https://drive.google.com/file/d/1Xf7fu1PqpQfhCMW_bW7EfIMmzTC6Tr1P/view", image:"cosmetics.png" }
    ];

    const state={projects:PROJECTS,activeTags:new Set(),q:"",sort:"newest"};
    const els={
      grid:document.getElementById("projectGrid"),
      q:document.getElementById("q"),
      sort:document.getElementById("sort"),
      tagBar:document.getElementById("tagBar"),
      modal:document.getElementById("projectModal"),
      modalTitle:document.getElementById("modalTitle"),
      modalBody:document.getElementById("modalBody"),
      themeToggle:document.getElementById("themeToggle"),
    };

    (function initTheme(){
      const saved=localStorage.getItem("theme");
      if(saved==="light") document.documentElement.classList.add("light");
      document.getElementById("year").textContent=new Date().getFullYear();
      els.themeToggle.addEventListener("click",()=>{
        document.documentElement.classList.toggle("light");
        localStorage.setItem("theme", document.documentElement.classList.contains("light")?"light":"dark");
      });
    })();

    (function buildTagBar(data){
      const all=new Set(); data.forEach(p=>p.tags.forEach(t=>all.add(t)));
      const tags=Array.from(all).sort((a,b)=>a.localeCompare(b));
      els.tagBar.innerHTML="";
      tags.forEach(tag=>{
        const btn=document.createElement("button"); btn.className="tag"; btn.textContent=tag; btn.role="listitem";
        btn.addEventListener("click",()=>{
          if(state.activeTags.has(tag)) state.activeTags.delete(tag); else state.activeTags.add(tag);
          btn.classList.toggle("active"); updateHash(); render();
        });
        els.tagBar.appendChild(btn);
      });
    })(PROJECTS);

    els.q.addEventListener("input",e=>{state.q=e.target.value.toLowerCase().trim();updateHash();render();});
    els.sort.addEventListener("change",e=>{state.sort=e.target.value;updateHash();render();});

    function render(){
      const {projects,activeTags,q,sort}=state;
      let list=projects.filter(p=>{
        const matchTags=activeTags.size===0||Array.from(activeTags).every(t=>p.tags.includes(t));
        const hay=(p.title+" "+p.description+" "+(p.tech||[]).join(" ")).toLowerCase();
        const matchQ=!q||hay.includes(q);
        return matchTags&&matchQ;
      });
      if(sort==="newest") list.sort((a,b)=>(b.year||0)-(a.year||0));
      if(sort==="oldest") list.sort((a,b)=>(a.year||0)-(b.year||0));
      if(sort==="az") list.sort((a,b)=>a.title.localeCompare(b.title));
      if(sort==="za") list.sort((a,b)=>b.title.localeCompare(a.title));

      els.grid.innerHTML="";
      list.forEach(p=>{
        const card=document.createElement("article"); card.className="card";
        const imgSrc = p.image && p.image.trim() ? p.image
          : "data:image/svg+xml;utf8," + encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 675'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='%2320c05c'/><stop offset='100%' stop-color='%237ce2a8'/></linearGradient></defs><rect width='1200' height='675' fill='url(%23g)'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Inter,Arial' font-size='44' fill='white'>${p.title}</text></svg>`);
        card.innerHTML=`
          <img src="${imgSrc}" alt="${p.title} image" />
          <div class="content">
            <div class="meta"><strong>${p.title}</strong><span>${p.year||""}</span></div>
            <p>${p.description}</p>
            <div class="tags">${(p.tags||[]).map(t=>`<span class="badge">${t}</span>`).join("")}</div>
            <div class="actions">
              ${p.demo?`<a class="btn" href="${p.demo}" target="_blank" rel="noopener">Demo</a>`:""}
              ${p.repo?`<a class="btn" href="${p.repo}" target="_blank" rel="noopener">Code</a>`:""}
              <button class="btn primary" data-id="${p.id}">Details</button>
            </div>
          </div>`;
        card.querySelector("button[data-id]").addEventListener("click",()=>openModal(p));
        els.grid.appendChild(card);
      });
    }

    function openModal(p){
      els.modalTitle.textContent=p.title;
      const imgSrc=p.image&&p.image.trim()?p.image:
        "data:image/svg+xml;utf8,"+encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 675'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0%' stop-color='%2320c05c'/><stop offset='100%' stop-color='%237ce2a8'/></linearGradient></defs><rect width='1200' height='675' fill='url(%23g)'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-family='Inter,Arial' font-size='44' fill='white'>${p.title}</text></svg>`);
      els.modalBody.innerHTML=`
        <img src="${imgSrc}" alt="${p.title} image" style="width:100%;border-radius:12px;border:1px solid var(--border);" />
        <p>${p.long||p.description}</p>
        ${p.highlights?.length?`<ul>${p.highlights.map(h=>`<li>${h}</li>`).join("")}</ul>`:""}
        ${p.tech?.length?`<p><strong>Tech:</strong> ${p.tech.join(", ")}</p>`:""}
        <div class="actions">
          ${p.demo?`<a class="btn" href="${p.demo}" target="_blank" rel="noopener">Live Demo</a>`:""}
          ${p.repo?`<a class="btn" href="${p.repo}" target="_blank" rel="noopener">Repository</a>`:""}
        </div>`;
      const params=new URLSearchParams(location.hash.replace(/^#/,""));
      params.set("project", encodeURIComponent(p.id));
      location.hash="#"+params.toString();
      els.modal.showModal();
      els.modal.addEventListener("close",()=>{
        const p2=new URLSearchParams(location.hash.replace(/^#/,"")); p2.delete("project");
        location.hash=p2.toString()?"#"+p2.toString():"";
      },{once:true});
    }

    function applyURLHash(){
      const params=new URLSearchParams(location.hash.replace(/^#/,""));
      state.q=params.get("q")||""; state.sort=params.get("sort")||"newest";
      const tags=params.get("tags"); const project=params.get("project");
      document.getElementById("q").value=state.q; document.getElementById("sort").value=state.sort;
      if(tags){state.activeTags=new Set(tags.split(",").filter(Boolean)); syncActiveTagButtons();}
      if(project){const p=state.projects.find(x=>x.id===decodeURIComponent(project)); if(p) openModal(p);}
    }
    function updateHash(){
      const params=new URLSearchParams();
      if(state.q) params.set("q",state.q);
      if(state.activeTags.size) params.set("tags", Array.from(state.activeTags).join(","));
      if(state.sort!=="newest") params.set("sort",state.sort);
      history.replaceState(null,"", params.toString()?"#"+params.toString():"#");
    }
    function syncActiveTagButtons(){
      Array.from(els.tagBar.querySelectorAll(".tag")).forEach(btn=>{
        if(state.activeTags.has(btn.textContent)) btn.classList.add("active"); else btn.classList.remove("active");
      });
    }
    window.addEventListener("hashchange",applyURLHash);

    (function(){ render(); applyURLHash(); })();
  </script>
</body>
</html>
